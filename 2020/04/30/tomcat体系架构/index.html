<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/blog/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <title>tomcatä½“ç³»æ¶æ„ - ğŸğŸŠ&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.12.1/css/all.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/mdbootstrap/4.13.0/css/mdb.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css" />

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link  rel="stylesheet" href="/blog/lib/prettify/tomorrow-night-eighties.min.css" />

<link  rel="stylesheet" href="/blog/css/main.css" />


  <link defer rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />


<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/blog/">&nbsp;<strong>ğŸğŸŠ's blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/blog/">é¦–é¡µ</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/blog/archives/">å½’æ¡£</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/blog/categories/">åˆ†ç±»</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/blog/tags/">æ ‡ç­¾</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/blog/about">å…³äº</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/blog/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
                <p class="mt-3 post-meta">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                  æ˜ŸæœŸå››, å››æœˆ 30æ—¥ 2020, 2:34 ä¸‹åˆ
                </p>
              

              <p class="mt-1">
                
                  
                  <span class="post-meta">
                    <i class="far fa-chart-bar"></i>
                    3.5k å­—
                  </span>
                

                
                  
                  <span class="post-meta">
                      <i class="far fa-clock"></i>
                      14 åˆ†é’Ÿ
                  </span>
                

                
                  <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
                  
                  <span id="busuanzi_container_page_pv" class="post-meta" style="display: none">
                    <i class="far fa-eye" aria-hidden="true"></i>
                    <span id="busuanzi_value_page_pv"></span> æ¬¡
                  </span>
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5 z-depth-3" id="board">
          <div class="post-content mx-auto" id="post">
            
              <p
                class="note note-warning">æœ¬æ–‡æœ€åæ›´æ–°äºï¼šæ˜ŸæœŸäºŒ, äº”æœˆ 5æ—¥ 2020, 6:02 æ™šä¸Š</p>
            
            <div class="markdown-body">
              <h2 id="webå®¹å™¨"><a href="#webå®¹å™¨" class="headerlink" title="webå®¹å™¨"></a>webå®¹å™¨</h2><p>WebæœåŠ¡å™¨ä¸€èˆ¬æŒ‡ç½‘ç«™æœåŠ¡å™¨ï¼Œæ˜¯æŒ‡é©»ç•™äºå› ç‰¹ç½‘ä¸ŠæŸç§ç±»å‹è®¡ç®—æœºçš„ç¨‹åºï¼Œå¯ä»¥å‘æµè§ˆå™¨ç­‰Webå®¢æˆ·ç«¯æä¾›æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ”¾ç½®ç½‘ç«™æ–‡ä»¶ï¼Œæä¾›ç»™ç”¨æˆ·æµè§ˆæˆ–ä¸‹è½½ã€‚</p>
<img src="/blog/2020/04/30/tomcat%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84/pic1.png" srcset="/blog/img/loading.gif" class>

<p>WebæœåŠ¡å™¨çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>æœåŠ¡å™¨æ˜¯ä¸€ç§è¢«åŠ¨ç¨‹åºï¼šåªæœ‰å½“Internetä¸Šè¿è¡Œå…¶ä»–è®¡ç®—æœºä¸­çš„æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨æ‰ä¼šå“åº”ã€‚</p>
</li>
<li><p>æœåŠ¡å™¨ä¸€èˆ¬ä½¿ç”¨HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ä¸å®¢æˆ·æœºæµè§ˆå™¨è¿›è¡Œä¿¡æ¯äº¤æµï¼Œè¿™å°±æ˜¯äººä»¬å¸¸æŠŠå®ƒä»¬ç§°ä¸ºHTTPæœåŠ¡å™¨çš„åŸå› ã€‚</p>
</li>
<li><p>WebæœåŠ¡å™¨ä¸ä»…èƒ½å¤Ÿå­˜å‚¨ä¿¡æ¯ï¼Œè¿˜èƒ½åœ¨ç”¨æˆ·é€šè¿‡Webæµè§ˆå™¨æä¾›çš„ä¿¡æ¯çš„åŸºç¡€ä¸Šè¿è¡Œè„šæœ¬å’Œç¨‹åºã€‚</p>
</li>
</ul>
<h2 id="tomcatä»‹ç»"><a href="#tomcatä»‹ç»" class="headerlink" title="tomcatä»‹ç»"></a>tomcatä»‹ç»</h2><p>tomcatæ˜¯ä¸€æ¬¾å¼€æºè½»é‡çº§Webåº”ç”¨æœåŠ¡å™¨,æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„Servletå®¹å™¨å®ç°ã€‚</p>
<p>Servletï¼ˆServer Appletï¼‰æ˜¯Java Servletçš„ç®€ç§°ï¼Œç§°ä¸ºå°æœåŠ¡ç¨‹åºæˆ–æœåŠ¡è¿æ¥å™¨ï¼Œç”¨Javaç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå…·æœ‰ç‹¬ç«‹äºå¹³å°å’Œåè®®çš„ç‰¹æ€§ï¼Œä¸»è¦åŠŸèƒ½åœ¨äºäº¤äº’å¼åœ°æµè§ˆå’Œç”Ÿæˆæ•°æ®ï¼Œç”ŸæˆåŠ¨æ€Webå†…å®¹ã€‚</p>
<p>Servletä¸¥æ ¼æ¥è®²æ˜¯æŒ‡Javaè¯­è¨€å®ç°çš„ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¯´çš„Servletæ˜¯æŒ‡ä»»ä½•å®ç°äº†è¿™ä¸ªServletæ¥å£çš„ç±»ã€‚</p>
<ul>
<li>å®ä¾‹åŒ–å¹¶è°ƒç”¨init()æ–¹æ³•åˆå§‹åŒ–è¯¥Servletï¼Œä¸€èˆ¬Servletåªåˆå§‹åŒ–ä¸€æ¬¡(åªæœ‰ä¸€ä¸ªå¯¹è±¡)</li>
<li>service()ï¼ˆæ ¹æ®è¯·æ±‚æ–¹æ³•ä¸åŒè°ƒç”¨doGet() æˆ–è€… doPost()ï¼Œæ­¤å¤–è¿˜æœ‰doHead()ã€doPut()ã€doTrace()ã€doDelete()ã€doOptions()ã€destroy())ã€‚</li>
<li>å½“ Server ä¸å†éœ€è¦ Servlet æ—¶ï¼ˆä¸€èˆ¬å½“ Server å…³é—­æ—¶ï¼‰ï¼ŒServerè°ƒç”¨Servletçš„destroy()æ–¹æ³•ã€‚</li>
</ul>
<h3 id="tomcatç‰ˆæœ¬å¯¹ç…§"><a href="#tomcatç‰ˆæœ¬å¯¹ç…§" class="headerlink" title="tomcatç‰ˆæœ¬å¯¹ç…§"></a>tomcatç‰ˆæœ¬å¯¹ç…§</h3><table>
<thead>
<tr>
<th></th>
<th><strong>6.X</strong></th>
<th><strong>7.X</strong></th>
<th><strong>8.X</strong></th>
<th><strong>8.5X</strong></th>
<th><strong>9.X</strong></th>
</tr>
</thead>
<tbody><tr>
<td>JDK</td>
<td>&gt;=1.5</td>
<td>&gt;=1.6</td>
<td>&gt;=1.7</td>
<td>&gt;=1.7</td>
<td>&gt;=1.8</td>
</tr>
<tr>
<td>Servlet</td>
<td>2.5</td>
<td>3.0</td>
<td>3.1</td>
<td>3.1</td>
<td>4.0</td>
</tr>
<tr>
<td>JSP</td>
<td>2.1</td>
<td>2.2</td>
<td>2.3</td>
<td>2.3</td>
<td>2.3</td>
</tr>
<tr>
<td>WebSocket</td>
<td>N</td>
<td>1.1</td>
<td>1.1</td>
<td>1.1</td>
<td>1.1</td>
</tr>
</tbody></table>
<p>8.5ç‰ˆæœ¬ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ”¯æŒServlet3.1</li>
<li>é»˜è®¤é‡‡ç”¨NIOï¼Œç§»é™¤BIO</li>
<li>æ”¯æŒNIO2(AIO)</li>
<li>æ”¯æŒHTTP/2åè®®</li>
<li>é»˜è®¤é‡‡ç”¨å¼‚æ­¥æ—¥å¿—å¤„ç†</li>
</ul>
<h2 id="tomcatéƒ¨ç½²æ–¹å¼"><a href="#tomcatéƒ¨ç½²æ–¹å¼" class="headerlink" title="tomcatéƒ¨ç½²æ–¹å¼"></a>tomcatéƒ¨ç½²æ–¹å¼</h2><h3 id="éšå¼éƒ¨ç½²"><a href="#éšå¼éƒ¨ç½²" class="headerlink" title="éšå¼éƒ¨ç½²"></a>éšå¼éƒ¨ç½²</h3><p>ç›´æ¥ä¸¢æ–‡ä»¶å¤¹ã€warã€jaråˆ°webappsç›®å½•ï¼Œtomcatä¼šæ ¹æ®æ–‡ä»¶å¤¹åç§°è‡ªåŠ¨ç”Ÿæˆè™šæ‹Ÿè·¯å¾„ï¼Œç®€å•ï¼Œä½†æ˜¯éœ€è¦é‡å¯TomcatæœåŠ¡å™¨ï¼ŒåŒ…æ‹¬è¦ä¿®æ”¹ç«¯å£å’Œè®¿é—®è·¯å¾„çš„ä¹Ÿéœ€è¦é‡å¯ã€‚</p>
<h3 id="æ˜¾å¼éƒ¨ç½²"><a href="#æ˜¾å¼éƒ¨ç½²" class="headerlink" title="æ˜¾å¼éƒ¨ç½²"></a>æ˜¾å¼éƒ¨ç½²</h3><p>æ·»åŠ contextå…ƒç´ </p>
<p>server.xmlä¸­çš„HoståŠ å…¥ä¸€ä¸ªContextï¼ˆæŒ‡å®šè·¯å¾„å’Œæ–‡ä»¶åœ°å€ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="xml">&lt;Context path=&quot;/comet&quot; docBase=&quot;D:\work_tomcat\ref-comet.war&quot; /&gt;</code></pre>
<p>å³/comet è¿™ä¸ªè™šæ‹Ÿè·¯å¾„æ˜ å°„åˆ°äº†D:\work_tomcat\ref-cometç›®å½•ä¸‹(warä¼šè§£å‹æˆæ–‡ä»¶)ï¼Œä¿®æ”¹å®Œservler.xmléœ€è¦é‡å¯tomcat æœåŠ¡å™¨ã€‚</p>
<p>åˆ›å»ºxmlæ–‡ä»¶</p>
<p>åœ¨conf/Catalina/localhostä¸­åˆ›å»ºxmlæ–‡ä»¶ï¼Œè®¿é—®è·¯å¾„ä¸ºæ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š</p>
<p>åœ¨localhostç›®å½•ä¸‹æ–°å»ºdemo.xmlï¼Œå†…å®¹ä¸ºï¼š</p>
<pre><code class="xml">&lt;Context docBase=&quot;D:\work_tomcat\ref-comet&quot; /&gt;</code></pre>
<p>è¿™æ—¶ä¸éœ€è¦æŒ‡å®šè·¯å¾„ï¼Œè™šæ‹Ÿç›®å½•å°±æ˜¯æ–‡ä»¶ådemoï¼Œpathé»˜è®¤ä¸º/demoï¼Œæ·»åŠ demo.xmlä¸éœ€è¦é‡å¯ tomcatæœåŠ¡å™¨ã€‚</p>
<p>ä¸‰ç§æ–¹å¼æ¯”è¾ƒï¼š</p>
<ul>
<li><p>éšå¼éƒ¨ç½²ï¼šéƒ¨ç½²é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œéœ€è¦æ‰‹åŠ¨ç§»åŠ¨Webåº”ç”¨åˆ°webappsä¸‹ï¼Œåœ¨å®é™…æ“ä½œä¸­ä¸æ˜¯å¾ˆäººæ€§åŒ–ã€‚</p>
</li>
<li><p>æ·»åŠ contextå…ƒç´ ï¼šéœ€è¦é…ç½®ä¸¤ä¸ªè·¯å¾„ï¼Œå¦‚æœpathä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™ä¸ºç¼ºçœé…ç½®ï¼Œæ¯æ¬¡ä¿®æ”¹server.xmlæ–‡ä»¶åéƒ½è¦é‡æ–°å¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œé‡æ–°éƒ¨ç½²ã€‚</p>
</li>
<li><p>åˆ›å»ºxmlæ–‡ä»¶ï¼šæœåŠ¡å™¨åå°ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼Œä¿®æ”¹ä¸€æ¬¡åå°éƒ¨ç½²ä¸€æ¬¡ï¼Œä¸ç”¨é‡å¤å¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œè¯¥æ–¹å¼æ˜¾å¾—æ›´ä¸ºæ™ºèƒ½åŒ–ã€‚</p>
</li>
</ul>
<h2 id="tomcatç›®å½•ç»“æ„"><a href="#tomcatç›®å½•ç»“æ„" class="headerlink" title="tomcatç›®å½•ç»“æ„"></a>tomcatç›®å½•ç»“æ„</h2><h3 id="binç›®å½•"><a href="#binç›®å½•" class="headerlink" title="binç›®å½•"></a>binç›®å½•</h3><ul>
<li><p>startupæ–‡ä»¶ï¼Œä¸»è¦æ˜¯æ£€æŸ¥catalina.bat/sh æ‰§è¡Œæ‰€éœ€ç¯å¢ƒï¼Œå¹¶è°ƒç”¨catalina.bat æ‰¹å¤„ç†æ–‡ä»¶ã€‚å¯åŠ¨tomcatã€‚</p>
</li>
<li><p>catalinaæ–‡ä»¶ï¼ŒçœŸæ­£å¯åŠ¨Tomcatæ–‡ä»¶ï¼Œå¯ä»¥åœ¨é‡Œé¢è®¾ç½®jvmå‚æ•°ã€‚åé¢æ€§èƒ½è°ƒä¼˜ä¼šé‡ç‚¹è®²</p>
</li>
<li><p>shutdownæ–‡ä»¶ï¼Œå…³é—­Tomcat</p>
</li>
<li><p>versionæ–‡ä»¶ï¼šæŸ¥çœ‹å½“å‰tomcatçš„ç‰ˆæœ¬å·ï¼Œ</p>
</li>
<li><p>configtestæ–‡ä»¶ï¼šæ ¡éªŒtomcaté…ç½®æ–‡ä»¶server.xmlçš„æ ¼å¼ã€å†…å®¹ç­‰æ˜¯å¦åˆæ³•ã€æ­£ç¡®ã€‚</p>
</li>
<li><p>serviceæ–‡ä»¶ï¼šå®‰è£…tomcatæœåŠ¡ï¼Œå¯ç”¨net start tomcat å¯åŠ¨</p>
</li>
</ul>
<p>è„šæœ¬version.shã€startup.shã€shutdown.shã€configtest.shéƒ½æ˜¯å¯¹catalina.shçš„åŒ…è£…ï¼Œå†…å®¹å¤§åŒå°å¼‚ï¼Œå·®å¼‚åœ¨äºåŠŸèƒ½ä»‹ç»å’Œè°ƒç”¨catalina.shæ—¶çš„å‚æ•°ä¸åŒã€‚</p>
<h3 id="configç›®å½•"><a href="#configç›®å½•" class="headerlink" title="configç›®å½•"></a>configç›®å½•</h3><ul>
<li><p>web.xml</p>
<p>Tomcatä¸­æ‰€æœ‰åº”ç”¨é»˜è®¤çš„éƒ¨ç½²æè¿°æ–‡ä»¶ï¼Œä¸»è¦å®šä¹‰äº†åŸºç¡€çš„Servletå’ŒMIMEæ˜ å°„(mime-mapping æ–‡ä»¶ç±»å‹ï¼Œå…¶å®å°±æ˜¯Tomcatå¤„ç†çš„æ–‡ä»¶ç±»å‹),å¦‚æœéƒ¨ç½²çš„åº”ç”¨ä¸­ä¸åŒ…å«Web.xmlï¼Œé‚£ä¹ˆTomcatå°†ä½¿ç”¨æ­¤æ–‡ä»¶åˆå§‹åŒ–éƒ¨ç½²æè¿°ï¼Œåä¹‹ï¼ŒTomcatä¼šåœ¨å¯åŠ¨æ—¶å°†é»˜è®¤æè¿°ä¸å®šä¹‰æè¿°é…ç½®è¿›è¡Œåˆå¹¶ã€‚å¸¸ç”¨äºï¼š</p>
<ul>
<li><p>åŠ è½½ä¸€äº›tomcatå†…ç½®çš„servlet</p>
</li>
<li><p>DefaultServleté»˜è®¤çš„,åŠ è½½é™æ€æ–‡ä»¶ html,js,jpgç­‰é™æ€æ–‡ä»¶ã€‚</p>
</li>
<li><p>JspServletä¸“é—¨å¤„ç†jspã€‚</p>
</li>
</ul>
</li>
<li><p>context.xml</p>
<p>ç”¨äºè‡ªå®šä¹‰æ‰€æœ‰Webåº”ç”¨å‡éœ€è¦åŠ è½½çš„Contexté…ç½®ï¼Œå¦‚æœWebåº”ç”¨æŒ‡å®šäº†è‡ªå·±çš„context.xmlï¼Œé‚£ä¹ˆè¯¥æ–‡ä»¶çš„é…ç½®å°†è¢«è¦†ç›–ã€‚</p>
<p>context.xmlä¸server.xmlä¸­é…ç½®contextçš„åŒºåˆ«ï¼šserver.xmlæ˜¯ä¸å¯åŠ¨æ€é‡åŠ è½½çš„èµ„æºï¼ŒæœåŠ¡å™¨ä¸€æ—¦å¯åŠ¨äº†ä»¥åï¼Œè¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå°±å¾—é‡å¯æœåŠ¡å™¨æ‰èƒ½é‡æ–°åŠ è½½ã€‚è€Œcontext.xmlæ–‡ä»¶åˆ™ä¸ç„¶ï¼ŒtomcatæœåŠ¡å™¨ä¼šå®šæ—¶å»æ‰«æè¿™ä¸ªæ–‡ä»¶ã€‚ä¸€æ—¦å‘ç°æ–‡ä»¶è¢«ä¿®æ”¹ï¼ˆæ—¶é—´æˆ³æ”¹å˜äº†ï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œè€Œä¸éœ€è¦é‡å¯æœåŠ¡å™¨ã€‚</p>
</li>
<li><p>catalina.policy</p>
<p>æƒé™ç›¸å…³Permission ï¼ŒTomcatæ˜¯è·‘åœ¨jvmä¸Šçš„ï¼Œæ‰€ä»¥æœ‰äº›é»˜è®¤çš„æƒé™ã€‚</p>
</li>
<li><p>tomcat-users.xml</p>
<p>é…ç½®Tomcatçš„serverçš„managerä¿¡æ¯ã€‚</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;tomcat-users xmlns=&quot;http://tomcat.apache.org/xml&quot;
              xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
              xsi:schemaLocation=&quot;http://tomcat.apache.org/xml tomcat-users.xsd&quot;
              version=&quot;1.0&quot;&gt;
&lt;role rolename=&quot;manager-gui&quot;/&gt;
&lt;user username=&quot;manager&quot; password=&quot;manager&quot; roles=&quot;manager-gui&quot;/&gt;
&lt;/tomcat-users&gt;</code></pre>
</li>
<li><p>logging.properties</p>
<p>è®¾ç½®tomcatæ—¥å¿—ï¼Œæ§åˆ¶è¾“å‡ºæˆ–è€…ä¸è¾“å‡ºå†…å®¹åˆ°æ–‡ä»¶ï¼Œä½†ä¸èƒ½é˜»æ­¢ç”Ÿæˆæ–‡ä»¶ï¼Œé˜»æ­¢ç”Ÿæˆæ–‡ä»¶å¯ä»¥æ³¨é‡Šæ‰ã€‚</p>
</li>
</ul>
<h3 id="webappsç›®å½•"><a href="#webappsç›®å½•" class="headerlink" title="webappsç›®å½•"></a>webappsç›®å½•</h3><p>å­˜æ”¾webé¡¹ç›®çš„ç›®å½•ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼›å¦‚æœè¿™ä¸ªç›®å½•ä¸‹å·²ç»å­˜åœ¨äº†ç›®å½•ï¼Œé‚£ä¹ˆéƒ½æ˜¯tomcatè‡ªå¸¦çš„ã€‚é¡¹ç›®ã€‚å…¶ä¸­ROOTæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é¡¹ç›®ï¼Œåœ¨åœ°å€æ ä¸­æ²¡æœ‰ç»™å‡ºé¡¹ç›®ç›®å½•æ—¶ï¼Œå¯¹åº”çš„å°±æ˜¯ROOTé¡¹ç›®ã€‚<a href="http://localhost:8080/examplesï¼Œè¿›å…¥ç¤ºä¾‹é¡¹ç›®ã€‚å…¶ä¸­exampleså°±æ˜¯é¡¹ç›®åï¼Œå³æ–‡ä»¶å¤¹çš„åå­—ã€‚" target="_blank" rel="noopener">http://localhost:8080/examplesï¼Œè¿›å…¥ç¤ºä¾‹é¡¹ç›®ã€‚å…¶ä¸­exampleså°±æ˜¯é¡¹ç›®åï¼Œå³æ–‡ä»¶å¤¹çš„åå­—ã€‚</a></p>
<h3 id="libç›®å½•"><a href="#libç›®å½•" class="headerlink" title="libç›®å½•"></a>libç›®å½•</h3><p>Tomcatçš„ç±»åº“ï¼Œé‡Œé¢æ˜¯ä¸€å¤§å †jaræ–‡ä»¶ã€‚å¦‚æœéœ€è¦æ·»åŠ Tomcatä¾èµ–çš„jaræ–‡ä»¶ï¼Œå¯ä»¥æŠŠå®ƒæ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠŠåº”ç”¨ä¾èµ–çš„jaræ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œè¿™ä¸ªç›®å½•ä¸­çš„jaræ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥å…±äº«ï¼Œä½†è¿™æ ·ä½ çš„åº”ç”¨æ”¾åˆ°å…¶ä»–Tomcatä¸‹æ—¶å°±ä¸èƒ½å†å…±äº«è¿™ä¸ªç›®å½•ä¸‹çš„JaråŒ…äº†ï¼Œæ‰€ä»¥å»ºè®®åªæŠŠTomcatéœ€è¦çš„JaråŒ…æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼›</p>
<h3 id="workç›®å½•"><a href="#workç›®å½•" class="headerlink" title="workç›®å½•"></a>workç›®å½•</h3><p>è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæœ€ç»ˆè¿è¡Œçš„æ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚é€šè¿‡webappsä¸­çš„é¡¹ç›®ç”Ÿæˆçš„ï¼å¯ä»¥æŠŠè¿™ä¸ªç›®å½•ä¸‹çš„å†…å®¹åˆ é™¤ï¼Œå†æ¬¡è¿è¡Œæ—¶ä¼šç”Ÿå†æ¬¡ç”Ÿæˆworkç›®å½•ã€‚å½“å®¢æˆ·ç«¯ç”¨æˆ·è®¿é—®ä¸€ä¸ªJSPæ–‡ä»¶æ—¶ï¼ŒTomcatä¼šé€šè¿‡JSPç”ŸæˆJavaæ–‡ä»¶ï¼Œç„¶åå†ç¼–è¯‘Javaæ–‡ä»¶ç”Ÿæˆclassæ–‡ä»¶ï¼Œç”Ÿæˆçš„javaå’Œclassæ–‡ä»¶éƒ½ä¼šå­˜æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</p>
<h3 id="tempç›®å½•"><a href="#tempç›®å½•" class="headerlink" title="tempç›®å½•"></a>tempç›®å½•</h3><p>å­˜æ”¾Tomcatçš„ä¸´æ—¶æ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„ä¸œè¥¿åœ¨åœæ­¢Tomcatåä¼šåˆ é™¤ï¼</p>
<h3 id="logsç›®å½•"><a href="#logsç›®å½•" class="headerlink" title="logsç›®å½•"></a>logsç›®å½•</h3><p>è¿™ä¸ªç›®å½•ä¸­éƒ½æ˜¯æ—¥å¿—æ–‡ä»¶ï¼Œè®°å½•äº†Tomcatå¯åŠ¨å’Œå…³é—­çš„ä¿¡æ¯ï¼Œå¦‚æœå¯åŠ¨Tomcatæ—¶æœ‰é”™è¯¯ï¼Œå¼‚å¸¸ä¹Ÿä¼šè®°å½•åœ¨æ—¥å¿—æ–‡ä»¶ä¸­</p>
<p>localhost-xxx.log    Webåº”ç”¨çš„å†…éƒ¨ç¨‹åºæ—¥å¿—ï¼Œå»ºè®®ä¿ç•™</p>
<p>catalina-xxx.log    æ§åˆ¶å°æ—¥å¿—</p>
<p>host-manager.xxx.log    Tomcatç®¡ç†é¡µé¢ä¸­çš„host-managerçš„æ“ä½œæ—¥å¿—ï¼Œå»ºè®®å…³é—­</p>
<p>localhost_access_log_xxx.log    ç”¨æˆ·è¯·æ±‚Tomcatçš„è®¿é—®æ—¥å¿—ï¼ˆè¿™ä¸ªæ–‡ä»¶åœ¨conf/server.xmlé‡Œé…ç½®ï¼‰ï¼Œå»ºè®®å…³é—­</p>
<h3 id="server-xmlæ–‡ä»¶"><a href="#server-xmlæ–‡ä»¶" class="headerlink" title="server.xmlæ–‡ä»¶"></a>server.xmlæ–‡ä»¶</h3><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;!-- Serverä»£è¡¨ä¸€ä¸ª Tomcat å®ä¾‹ã€‚å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Servicesï¼Œå…¶ä¸­æ¯ä¸ªServiceéƒ½æœ‰è‡ªå·±çš„Engineså’ŒConnectorsã€‚
       port=&quot;8005&quot;æŒ‡å®šä¸€ä¸ªç«¯å£ï¼Œè¿™ä¸ªç«¯å£è´Ÿè´£ç›‘å¬å…³é—­tomcatçš„è¯·æ±‚
  --&gt;
&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;
&lt;!-- ç›‘å¬å™¨ --&gt;
&lt;Listener className=&quot;org.apache.catalina.startup.VersionLoggerListener&quot; /&gt;
&lt;Listener className=&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine=&quot;on&quot; /&gt;
&lt;Listener className=&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot; /&gt;
&lt;Listener className=&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot; /&gt;
&lt;Listener className=&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot; /&gt;
&lt;!-- å…¨å±€å‘½åèµ„æºï¼Œå®šä¹‰äº†UserDatabaseçš„ä¸€ä¸ªJNDI(javaå‘½åå’Œç›®å½•æ¥å£)ï¼Œé€šè¿‡pathnameçš„æ–‡ä»¶å¾—åˆ°ä¸€ä¸ªç”¨æˆ·æˆæƒçš„å†…å­˜æ•°æ®åº“ --&gt;
&lt;GlobalNamingResources&gt;
&lt;Resource name=&quot;UserDatabase&quot; auth=&quot;Container&quot;
               type=&quot;org.apache.catalina.UserDatabase&quot;
               description=&quot;User database that can be updated and saved&quot;
               factory=&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;
               pathname=&quot;conf/tomcat-users.xml&quot; /&gt;
&lt;/GlobalNamingResources&gt;
&lt;!-- Serviceå®ƒåŒ…å«ä¸€ä¸ª&lt;Engine&gt;å…ƒç´ ,ä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ª&lt;Connector&gt;,è¿™äº›Connectorå…ƒç´ å…±äº«ç”¨åŒä¸€ä¸ªEngineå…ƒç´  --&gt;
&lt;Service name=&quot;Catalina&quot;&gt;
&lt;!-- 
         æ¯ä¸ªServiceå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥å™¨&lt;Connector&gt;å…ƒç´ ï¼Œ
         ç¬¬ä¸€ä¸ªConnectorå…ƒç´ å®šä¹‰äº†ä¸€ä¸ªHTTP Connector,å®ƒé€šè¿‡8080ç«¯å£æ¥æ”¶HTTPè¯·æ±‚;ç¬¬äºŒä¸ªConnectorå…ƒç´ å®š
         ä¹‰äº†ä¸€ä¸ªJD Connector,å®ƒé€šè¿‡8009ç«¯å£æ¥æ”¶ç”±å…¶å®ƒæœåŠ¡å™¨è½¬å‘è¿‡æ¥çš„è¯·æ±‚.
     --&gt;
&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
                connectionTimeout=&quot;20000&quot;
                redirectPort=&quot;8443&quot; /&gt;
&lt;Connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;
&lt;!-- æ¯ä¸ªServiceåªèƒ½æœ‰ä¸€ä¸ª&lt;Engine&gt;å…ƒç´  --&gt;
&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;
&lt;Realm className=&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;
&lt;Realm className=&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;
                resourceName=&quot;UserDatabase&quot;/&gt;
&lt;/Realm&gt;
&lt;!-- é»˜è®¤hosté…ç½®ï¼Œæœ‰å‡ ä¸ªåŸŸåå°±é…ç½®å‡ ä¸ªHostï¼Œä½†æ˜¯è¿™ç§åªèƒ½æ˜¯åŒä¸€ä¸ªç«¯å£å· --&gt;
&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;
             unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
     ã€€ã€€&lt;!-- Tomcatçš„è®¿é—®æ—¥å¿—ï¼Œé»˜è®¤å¯ä»¥å…³é—­æ‰å®ƒï¼Œå®ƒä¼šåœ¨logsæ–‡ä»¶é‡Œç”Ÿæˆlocalhost_access_logçš„è®¿é—®æ—¥å¿— --&gt;
&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;
                prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;
                pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; /&gt;
&lt;/Host&gt;
&lt;Host name=&quot;www.hzg.com&quot;  appBase=&quot;webapps&quot;
             unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;
&lt;Context path=&quot;&quot; docBase=&quot;/myweb1&quot; /&gt;
&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;
                prefix=&quot;hzg_access_log&quot; suffix=&quot;.txt&quot;
                pattern=&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; /&gt;
&lt;/Host&gt;
&lt;/Engine&gt;
&lt;/Service&gt;
&lt;/Server&gt;</code></pre>
<h4 id="server-xmlä¸­æ—¥å¿—çš„patterè§£é‡Š"><a href="#server-xmlä¸­æ—¥å¿—çš„patterè§£é‡Š" class="headerlink" title="server.xmlä¸­æ—¥å¿—çš„patterè§£é‡Š"></a>server.xmlä¸­æ—¥å¿—çš„patterè§£é‡Š</h4><p>æœ‰æ•ˆçš„æ—¥å¿—æ ¼å¼æ¨¡å¼å¯ä»¥å‚è§ä¸‹é¢å†…å®¹ï¼Œå¦‚ä¸‹å­—ç¬¦ä¸²ï¼Œå…¶å¯¹åº”çš„ä¿¡æ¯ç”±æŒ‡å®šçš„å“åº”å†…å®¹å–ä»£ï¼š</p>
<ul>
<li><p>ï¼…a - è¿œç¨‹IPåœ°å€</p>
</li>
<li><p>ï¼…A - æœ¬åœ°IPåœ°å€</p>
</li>
<li><p>ï¼…b - å‘é€çš„å­—èŠ‚æ•°ï¼Œä¸åŒ…æ‹¬HTTPå¤´ï¼Œæˆ–â€œ - â€å¦‚æœæ²¡æœ‰å‘é€å­—èŠ‚</p>
</li>
<li><p>ï¼…B - å‘é€çš„å­—èŠ‚æ•°ï¼Œä¸åŒ…æ‹¬HTTPå¤´</p>
</li>
<li><p>ï¼…h - è¿œç¨‹ä¸»æœºå</p>
</li>
<li><p>ï¼…H - è¯·æ±‚åè®®</p>
</li>
<li><p>ï¼…l (å°å†™çš„L)- è¿œç¨‹é€»è¾‘ä»identdçš„ç”¨æˆ·åï¼ˆæ€»æ˜¯è¿”å›â€™ - â€˜ï¼‰</p>
</li>
<li><p>ï¼…m - è¯·æ±‚æ–¹æ³•</p>
</li>
<li><p>ï¼…p - æœ¬åœ°ç«¯å£</p>
</li>
<li><p>ï¼…q - æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªâ€œï¼Ÿâ€å¦‚æœå®ƒå­˜åœ¨ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²</p>
</li>
<li><p>ï¼…r - ç¬¬ä¸€è¡Œçš„è¦æ±‚</p>
</li>
<li><p>ï¼…s - å“åº”çš„HTTPçŠ¶æ€ä»£ç </p>
</li>
<li><p>ï¼…S - ç”¨æˆ·ä¼šè¯ID</p>
</li>
<li><p>ï¼…t - æ—¥æœŸå’Œæ—¶é—´ï¼Œåœ¨é€šç”¨æ—¥å¿—æ ¼å¼</p>
</li>
<li><p>ï¼…u - è¿œç¨‹ç”¨æˆ·èº«ä»½éªŒè¯</p>
</li>
<li><p>ï¼…U - è¯·æ±‚çš„URLè·¯å¾„</p>
</li>
<li><p>ï¼…v - æœ¬åœ°æœåŠ¡å™¨å</p>
</li>
<li><p>ï¼…D - å¤„ç†è¯·æ±‚çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰</p>
</li>
<li><p>ï¼…T - å¤„ç†è¯·æ±‚çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰</p>
</li>
<li><p>ï¼…I ï¼ˆå¤§å†™çš„iï¼‰ - å½“å‰è¯·æ±‚çš„çº¿ç¨‹åç§°</p>
</li>
</ul>
<h2 id="tomcatç»„ä»¶åŠæ¶æ„"><a href="#tomcatç»„ä»¶åŠæ¶æ„" class="headerlink" title="tomcatç»„ä»¶åŠæ¶æ„"></a>tomcatç»„ä»¶åŠæ¶æ„</h2><img src="/blog/2020/04/30/tomcat%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84/pic2.png" srcset="/blog/img/loading.gif" class>

<table>
<thead>
<tr>
<th><strong>ç»„ä»¶åç§°</strong></th>
<th><strong>è¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Server</td>
<td>ä»£è¡¨æ•´ä¸ªtomcatæœåŠ¡å™¨ï¼Œä¸€ä¸ªTomcatåªæœ‰ä¸€ä¸ªServcerã€‚</td>
</tr>
<tr>
<td>Service</td>
<td>Serverä¸­çš„ä¸€ä¸ªé€»è¾‘åŠŸèƒ½å±‚ï¼Œç»´æŠ¤å¤šä¸ªConnectorå’Œä¸€ä¸ªContainerï¼Œä¸€ä¸ªServerå¯ä»¥åŒ…å«å¤šä¸ªServiceã€‚</td>
</tr>
<tr>
<td>Connector</td>
<td>è¿æ¥å™¨ï¼Œç›‘å¬è½¬æ¢Socketè¯·æ±‚ï¼Œå°†è¯·æ±‚äº¤ç»™Containerå¤„ç†ï¼Œæ”¯æŒä¸åŒåè®®ä»¥åŠä¸åŒçš„I/Oæ–¹å¼ï¼Œæ˜¯Serviceçš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œä¸€ä¸ªServiceå¯ä»¥æœ‰å¤šä¸ªConnectorã€‚</td>
</tr>
<tr>
<td>Container</td>
<td>Serviceçš„å¦ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ŒæŒ‰ç…§å±‚çº§æœ‰Engineã€Hostã€Contextã€Wrapperå››ç§ï¼Œä¸€ä¸ªServiceåªæœ‰ä¸€ä¸ªEngineï¼Œä¸»è¦ä½œç”¨æ˜¯æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</td>
</tr>
<tr>
<td>Engine</td>
<td>Servlerä¸­å±‚çº§æœ€é«˜çš„å®¹å™¨å¯¹è±¡</td>
</tr>
<tr>
<td>Host</td>
<td>Servletå¼•æ“ä¸­çš„è™šæ‹Ÿæœºï¼Œä¸»è¦ä¸åŸŸåæœ‰å…³ï¼Œä¸€ä¸ªæœåŠ¡å™¨æœ‰å¤šä¸ªåŸŸåæ˜¯å¯ä»¥ä½¿ç”¨å¤šä¸ªHost</td>
</tr>
<tr>
<td>Context</td>
<td>ç”¨äºè¡¨ç¤ºServletContext,ä¸€ä¸ªServletContextè¡¨ç¤ºä¸€ä¸ªç‹¬ç«‹çš„Webåº”ç”¨</td>
</tr>
<tr>
<td>Wrapper</td>
<td>ç”¨äºè¡¨ç¤ºWebåº”ç”¨ä¸­å®šä¹‰çš„Servlet</td>
</tr>
<tr>
<td>Executor</td>
<td>Tomcatç»„ä»¶é—´å¯ä»¥å…±äº«çš„çº¿ç¨‹æ± </td>
</tr>
</tbody></table>
<h3 id="è¯·æ±‚çš„è¿è¡Œè¿‡ç¨‹"><a href="#è¯·æ±‚çš„è¿è¡Œè¿‡ç¨‹" class="headerlink" title="è¯·æ±‚çš„è¿è¡Œè¿‡ç¨‹"></a>è¯·æ±‚çš„è¿è¡Œè¿‡ç¨‹</h3><img src="/blog/2020/04/30/tomcat%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84/pic3.png" srcset="/blog/img/loading.gif" class>

<h3 id="connectorè¿æ¥å™¨"><a href="#connectorè¿æ¥å™¨" class="headerlink" title="connectorè¿æ¥å™¨"></a>connectorè¿æ¥å™¨</h3><p>Connectoré“¾æ¥å™¨å°è£…äº†åº•å±‚çš„ç½‘ç»œè¯·æ±‚(Socketè¯·æ±‚åŠç›¸åº”å¤„ç†),æä¾›äº†ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿Containerå®¹å™¨ä¸å…·ä½“çš„è¯·æ±‚åè®®ä»¥åŠI/Oæ–¹å¼è§£è€¦ã€‚Connectorå°†Socketè¾“å…¥è½¬æ¢æˆRequestå¯¹è±¡ï¼Œäº¤ç»™Containerå®¹å™¨è¿›è¡Œå¤„ç†ï¼Œå¤„ç†è¯·æ±‚åï¼ŒContaineré€šè¿‡Connectoræä¾›çš„Responseå¯¹è±¡å°†ç»“æœå†™å…¥è¾“å‡ºæµã€‚å› ä¸ºæ— è®ºæ˜¯Requestå¯¹è±¡è¿˜æ˜¯Responseå¯¹è±¡éƒ½æ²¡æœ‰å®ç°Servletè§„èŒƒå¯¹åº”çš„æ¥å£ï¼ŒContainerä¼šå°†å®ƒä»¬è¿›ä¸€æ­¥åˆ†è£…æˆServletRequestå’ŒServletResponse.</p>
<img src="/blog/2020/04/30/tomcat%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84/pic4.png" srcset="/blog/img/loading.gif" class>

<p>ä¸‰ç§ä¼ è¾“åè®®</p>
<ul>
<li>HTTPï¼šHTTP/1.1åè®®</li>
<li>AJPåè®®ï¼šä¸»è¦ä¸Apache HTTP Serveré›†æˆï¼Œä¸»è¦ç”¨äºå¤„ç†é™æ€èµ„æºï¼ŒAJPé‡‡ç”¨äºŒè¿›åˆ¶ä¼ è¾“å¯è¯»æ€§æ–‡æœ¬ï¼Œä½¿ç”¨ä¿æŒæŒä¹…æ€§çš„TCPé“¾æ¥ï¼Œä½¿å¾—AJPå ç”¨æ›´å°‘çš„å¸¦å®½ï¼Œå¹¶ä¸”é“¾æ¥å¼€é”€è¦å°å¾—å¤šï¼Œä½†æ˜¯ç”±äºAJPé‡‡ç”¨æŒä¹…åŒ–é“¾æ¥ï¼Œå› æ­¤æœ‰æ•ˆçš„è¿æ¥æ•°è¾ƒHTTPè¦æ›´å¤šã€‚</li>
<li>HTTP2ï¼šHTTP/2.0åè®®ï¼Œä¸‹ä¸€ä»£HTTPåè®®ï¼Œç›®å‰å¸‚åœºä¸æˆç†Ÿã€‚</li>
</ul>
<p>ä¸‰ç§I/Oæ–¹å¼</p>
<ul>
<li>NIOï¼šé‡‡ç”¨JDKçš„NIOç±»åº“å®ç°</li>
<li>NIO2(AIO)ï¼šé‡‡ç”¨JDK1.7çš„NIO2ç±»åº“å®ç°</li>
<li>APRï¼šé‡‡ç”¨APR(Apacheå¯ç§»æ¤è¿è¡Œåº“)</li>
</ul>
<table>
<thead>
<tr>
<th><strong>protocol</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody><tr>
<td>HTTP/1.1</td>
<td>é»˜è®¤å€¼</td>
</tr>
<tr>
<td>org.apache.coyote.http11.Http11NioProtocol</td>
<td>http+Nioçš„æ–¹å¼</td>
</tr>
<tr>
<td>org.apache.coyote.http11.Http11Nio2Protocol</td>
<td>http+Nio2çš„æ–¹å¼ï¼ˆAIOï¼‰</td>
</tr>
<tr>
<td>org.apache.coyote.http11.Http11AprProtocol</td>
<td>http+Aprçš„æ–¹å¼</td>
</tr>
</tbody></table>
<p>å¯¹äºI/0é€‰æ‹©ï¼Œè¦æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥å®šï¼Œä¸€èˆ¬é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒAPRå’ŒNIO2çš„æ€§èƒ½è¦ä¼˜äºNIOå’ŒBIOï¼Œï¼ˆlinuxæ“ä½œç³»ç»Ÿæ”¯æŒçš„NIO2ç”±äºæ˜¯ä¸€ä¸ªå‡çš„ï¼Œå¹¶æ²¡æœ‰çœŸæ­£å®ç°AIOï¼Œæ‰€ä»¥ä¸€èˆ¬linuxä¸Šæ¨èä½¿ç”¨NIOï¼Œå¦‚æœæ˜¯APRçš„è¯ï¼Œéœ€è¦å®‰è£…APRåº“ï¼Œè€ŒWindowsä¸Šé»˜è®¤å®‰è£…äº†ï¼‰ï¼Œæ‰€ä»¥åœ¨8.5çš„ç‰ˆæœ¬ä¸­é»˜è®¤æ˜¯NIOã€‚</p>

            </div>
            <hr>
            <div>
              <p>
                
                  <span>
                <i class="iconfont icon-inbox"></i>
                    
                      <a class="hover-with-bg" href="/blog/categories/tomcat/">tomcat</a>
                      &nbsp;
                    
                  </span>&nbsp;&nbsp;
                
                
                  <span>
                <i class="iconfont icon-tag"></i>
                    
                      <a class="hover-with-bg" href="/blog/tags/tomcat/">tomcat</a>
                    
                  </span>
                
              </p>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0åè®®</a> ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/blog/2020/04/30/tomcat%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">
                        <i class="fa fa-chevron-left"></i>
                        <span class="hidden-mobile">tomcatæºç è§£æ</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/blog/2020/04/30/redis%E7%9A%84%E9%AB%98%E5%8F%AF%E7%94%A8/">
                        <span class="hidden-mobile">redisçš„é«˜å¯ç”¨</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-chevron-right"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

              
                <!-- Comments -->
                <div class="comments" id="comments">
                  
                  

                </div>
              
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc-start"></div>
<div id="toc">
  <p class="h5"><i class="far fa-list-alt"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    </div>
    
  <div>
    
      <!-- ä¸è’œå­ç»Ÿè®¡PV -->
      
      <span id="busuanzi_container_site_pv" style="display: none">
      æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡
    </span>
    
    
      <!-- ä¸è’œå­ç»Ÿè®¡UV -->
      
      <span id="busuanzi_container_site_uv" style="display: none">
      æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº
    </span>
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="https://cdn.staticfile.org/mdbootstrap/4.13.0/js/mdb.min.js" ></script>
<script  src="/blog/js/main.js" ></script>


  <script  src="/blog/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.10.0/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var navHeight = $('#navbar').height();
      var toc = $('#toc');
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;
      var tocLimMax = 2 * boardTop + boardCtn.height();

      $(window).scroll(function () {
        var tocLimMin = $('#toc-start').offset().top - navHeight;
        var scroH = document.body.scrollTop + document.documentElement.scrollTop;

        if (tocLimMin <= scroH && scroH <= tocLimMax) {
          toc.css({
            'display': 'block',
            'position': 'fixed',
            'top': navHeight,
          });
        } else if (scroH <= tocLimMin) {
          toc.css({
            'position': '',
            'top': '',
          });
        } else if (scroH > tocLimMax) {
          toc.css('display', 'none');
        }
      });
      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc > p').css('visibility', 'visible');
      }
      var offset = boardCtn.css('margin-right')
      $('#toc-ctn').css({
        'right': offset
      })
    });
  </script>





  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/blog/js/clipboard-use.js" ></script>



  <script defer src="https://cdn.staticfile.org/smoothscroll/1.4.10/SmoothScroll.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




<!-- Plugins -->


  

  

  

  

  

  



  <script  src="https://cdn.staticfile.org/prettify/188.0.0/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "tomcatä½“ç³»æ¶æ„&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/blog/js/local-search.js" ></script>
  <script>
    var path = "/blog/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script defer src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>





  
  
    <script type="text/javascript">
      //å®šä¹‰è·å–è¯è¯­ä¸‹æ ‡
      var a_idx = 0;
      jQuery(document).ready(function ($) {
        //ç‚¹å‡»bodyæ—¶è§¦å‘äº‹ä»¶
        $("body").click(function (e) {
          //éœ€è¦æ˜¾ç¤ºçš„è¯è¯­
          var a = new Array("å¯Œå¼º", "æ°‘ä¸»", "æ–‡æ˜", "å’Œè°", "è‡ªç”±", "å¹³ç­‰", "å…¬æ­£", "æ³•æ²»", "çˆ±å›½", "æ•¬ä¸š", "è¯šä¿¡", "å‹å–„");
          //è®¾ç½®è¯è¯­ç»™spanæ ‡ç­¾
          var $i = $("<span/>").text(a[a_idx]);
          //ä¸‹æ ‡ç­‰äºåŸæ¥ä¸‹æ ‡+1  ä½™ è¯è¯­æ€»æ•°
          a_idx = (a_idx + 1) % a.length;
          //è·å–é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆ†åˆ«ç›¸å¯¹äºæ–‡æ¡£çš„å·¦å’Œå³è¾¹ç¼˜ã€‚
          //è·å–xå’Œyçš„æŒ‡é’ˆåæ ‡
          var x = e.pageX, y = e.pageY;
          //åœ¨é¼ æ ‡çš„æŒ‡é’ˆçš„ä½ç½®ç»™$iå®šä¹‰çš„spanæ ‡ç­¾æ·»åŠ cssæ ·å¼
          $i.css({
            "z-index": 999,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": rand_color()
          });
          // éšæœºé¢œè‰²
          function rand_color() {
            return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
          }
          //åœ¨bodyæ·»åŠ è¿™ä¸ªæ ‡ç­¾
          $("body").append($i);
          //animate() æ–¹æ³•æ‰§è¡Œ CSS å±æ€§é›†çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚
          //è¯¥æ–¹æ³•é€šè¿‡CSSæ ·å¼å°†å…ƒç´ ä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚CSSå±æ€§å€¼æ˜¯é€æ¸æ”¹å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœã€‚
          //è¯¦æƒ…è¯·çœ‹http://www.w3school.com.cn/jquery/effect_animate.asp
          $i.animate({
            //å°†åŸæ¥çš„ä½ç½®å‘ä¸Šç§»åŠ¨180
            "top": y - 180,
            "opacity": 0
            //1500åŠ¨ç”»çš„é€Ÿåº¦
          }, 1500, function () {
            //æ—¶é—´åˆ°äº†è‡ªåŠ¨åˆ é™¤
            $i.remove();
          });
        });
      })
      ;
    </script>
  








</body>
</html>
