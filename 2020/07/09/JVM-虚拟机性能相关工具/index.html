

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/img/favicon.png">
  <link rel="icon" type="image/png" href="/blog/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <title>è™šæ‹Ÿæœºæ€§èƒ½ç›¸å…³å·¥å…· - ğŸğŸŠ&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/blog/lib/hint/hint.min.css" />

  
    
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
  

  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_6peoq002giu.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/blog/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/blog/js/utils.js" ></script>
  <script  src="/blog/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/blog/">&nbsp;<strong>ğŸğŸŠ's blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/">
                <i class="iconfont icon-home-fill"></i>
                ä¸»é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/blog/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/blog/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-07-09 17:51" pubdate>
      2020å¹´7æœˆ9æ—¥ ä¸‹åˆ
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.3k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      28
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">è™šæ‹Ÿæœºæ€§èƒ½ç›¸å…³å·¥å…·</h1>
            
            <div class="markdown-body" id="post-body">
              <h3 id="JVMçš„è¿è¡Œæ—¶å‚æ•°"><a href="#JVMçš„è¿è¡Œæ—¶å‚æ•°" class="headerlink" title="JVMçš„è¿è¡Œæ—¶å‚æ•°"></a>JVMçš„è¿è¡Œæ—¶å‚æ•°</h3><p>jvmçš„å‚æ•°ç±»å‹åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>æ ‡å‡†å‚æ•°ï¼š-helpã€-version</li>
<li>-Xå‚æ•°ï¼ˆéæ ‡å‡†å‚æ•°ï¼‰ï¼š-Xintã€-Xcomp</li>
<li>-XXå‚æ•°ï¼ˆä½¿ç”¨ç‡è¾ƒé«˜ï¼‰ï¼š-XX:newSizeã€-XX:+UseSerialGC</li>
</ul>
<h4 id="æ ‡å‡†å‚æ•°"><a href="#æ ‡å‡†å‚æ•°" class="headerlink" title="æ ‡å‡†å‚æ•°"></a>æ ‡å‡†å‚æ•°</h4><p>jvmçš„æ ‡å‡†å‚æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯å¾ˆç¨³å®šçš„ï¼Œåœ¨æœªæ¥çš„JVMç‰ˆæœ¬ä¸­ä¸ä¼šæ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨java -helpæ£€ç´¢å‡ºæ‰€æœ‰çš„æ ‡å‡†å‚æ•°ã€‚</p>
<p>é€šè¿‡-Dè®¾ç½®ç³»ç»Ÿå±æ€§å‚æ•°</p>
<pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestJVM</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;
    String str = System.getProperty(<span class="hljs-string">"str"</span>);
    <span class="hljs-keyword">if</span> (str == <span class="hljs-keyword">null</span>) &#123;
      System.out.println(<span class="hljs-string">"itcast"</span>);
    &#125; <span class="hljs-keyword">else</span> &#123;
      System.out.println(str); 
    &#125; 
  &#125; 
&#125;</code></pre>

<pre><code class="hljs shell">F:\t&gt;javac TestJVM.java
F:\t&gt;java TestJVM itcast
F:\t&gt;java -Dstr=123 TestJVM 123</code></pre>

<h5 id="serverä¸-clientå‚æ•°"><a href="#serverä¸-clientå‚æ•°" class="headerlink" title="-serverä¸-clientå‚æ•°"></a>-serverä¸-clientå‚æ•°</h5><p>å¯ä»¥é€šè¿‡-serveræˆ–-clientè®¾ç½®jvmçš„è¿è¡Œå‚æ•°ã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯Server VMçš„åˆå§‹å †ç©ºé—´ä¼šå¤§ä¸€äº›ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼Œå¯åŠ¨æ…¢è¿è¡Œå¿«ã€‚Client VMç›¸å¯¹æ¥è®²ä¼šä¿å®ˆä¸€äº›ï¼Œåˆå§‹å †ç©ºé—´ä¼šå°ä¸€äº›ï¼Œä½¿ç”¨ä¸²è¡Œçš„åƒåœ¾å›æ”¶å™¨ï¼Œå®ƒçš„ç›®æ ‡æ˜¯ä¸ºäº†è®©JVMçš„å¯åŠ¨é€Ÿåº¦æ›´å¿«ï¼Œä½†è¿è¡Œé€Ÿåº¦ä¼šæ¯”Serveræ¨¡å¼æ…¢äº›ã€‚</p>
<p>JVMåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ ¹æ®ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©ä½¿ç”¨Serverè¿˜æ˜¯Clientç±»å‹çš„JVMã€‚</p>
<p>32ä½æ“ä½œç³»ç»Ÿ</p>
<ul>
<li><p>å¦‚æœæ˜¯Windowsç³»ç»Ÿï¼Œä¸è®ºç¡¬ä»¶é…ç½®å¦‚ä½•ï¼Œéƒ½é»˜è®¤ä½¿ç”¨Clientç±»å‹çš„JVMã€‚</p>
</li>
<li><p>å¦‚æœæ˜¯å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šï¼Œæœºå™¨é…ç½®æœ‰2GBä»¥ä¸Šçš„å†…å­˜åŒæ—¶æœ‰2ä¸ªä»¥ä¸ŠCPUçš„è¯é»˜è®¤ä½¿ç”¨serveræ¨¡å¼ï¼Œå¦åˆ™ä½¿ç”¨clientæ¨¡å¼ã€‚</p>
</li>
</ul>
<p>64ä½æ“ä½œç³»ç»Ÿ</p>
<ul>
<li>åªæœ‰serverç±»å‹ï¼Œä¸æ”¯æŒclientç±»å‹ã€‚</li>
</ul>
<h4 id="Xå‚æ•°"><a href="#Xå‚æ•°" class="headerlink" title="-Xå‚æ•°"></a>-Xå‚æ•°</h4><p>jvmçš„-Xå‚æ•°æ˜¯éæ ‡å‡†å‚æ•°ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„jvmä¸­ï¼Œå‚æ•°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œå¯ä»¥é€šè¿‡java -XæŸ¥çœ‹éæ ‡å‡†å‚æ•°ã€‚</p>
<h5 id="Xintã€-Xcompã€-Xmixed"><a href="#Xintã€-Xcompã€-Xmixed" class="headerlink" title="-Xintã€-Xcompã€-Xmixed"></a>-Xintã€-Xcompã€-Xmixed</h5><ul>
<li><p>åœ¨è§£é‡Šæ¨¡å¼(interpreted mode)ä¸‹ï¼Œ-Xintæ ‡è®°ä¼šå¼ºåˆ¶JVMæ‰§è¡Œæ‰€æœ‰çš„å­—èŠ‚ç ï¼Œå½“ç„¶è¿™ä¼šé™ä½è¿è¡Œé€Ÿåº¦ï¼Œé€šå¸¸ä½10å€æˆ–æ›´å¤šã€‚</p>
</li>
<li><p>-Xcompå‚æ•°ä¸å®ƒï¼ˆ-Xintï¼‰æ­£å¥½ç›¸åï¼ŒJVMåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šæŠŠæ‰€æœ‰çš„å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œä»è€Œå¸¦æ¥æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–ã€‚</p>
<blockquote>
<p>ç„¶è€Œï¼Œå¾ˆå¤šåº”ç”¨åœ¨ä½¿ç”¨-Xcompä¹Ÿä¼šæœ‰ä¸€äº›æ€§èƒ½æŸå¤±ï¼Œå½“ç„¶è¿™æ¯”ä½¿ç”¨-XintæŸå¤±çš„å°‘ï¼ŒåŸå› æ˜¯- xcompæ²¡æœ‰è®©JVMå¯ç”¨JITç¼–è¯‘å™¨çš„å…¨éƒ¨åŠŸèƒ½ã€‚JITç¼–è¯‘å™¨å¯ä»¥å¯¹æ˜¯å¦éœ€è¦ç¼–è¯‘åšåˆ¤æ–­ï¼Œå¦‚æœæ‰€æœ‰ä»£ç éƒ½è¿›è¡Œç¼–è¯‘çš„è¯ï¼Œå¯¹äºä¸€äº›åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</p>
</blockquote>
</li>
<li><p>-Xmixedæ˜¯æ··åˆæ¨¡å¼ï¼Œå°†è§£é‡Šæ¨¡å¼ä¸ç¼–è¯‘æ¨¡å¼è¿›è¡Œæ··åˆä½¿ç”¨ï¼Œç”±jvmè‡ªå·±å†³å®šï¼Œè¿™æ˜¯jvmé»˜è®¤çš„æ¨¡</p>
<p>å¼ï¼Œä¹Ÿæ˜¯æ¨èä½¿ç”¨çš„æ¨¡å¼ã€‚</p>
</li>
</ul>
<h5 id="Xmsä¸-Xmxå‚æ•°"><a href="#Xmsä¸-Xmxå‚æ•°" class="headerlink" title="-Xmsä¸-Xmxå‚æ•°"></a>-Xmsä¸-Xmxå‚æ•°</h5><p>-Xmsä¸-Xmxåˆ†åˆ«æ˜¯è®¾ç½®jvmçš„å †å†…å­˜çš„åˆå§‹å¤§å°å’Œæœ€å¤§å¤§å°ã€‚</p>
<p>-Xmx2048mï¼šç­‰ä»·äº-XX:MaxHeapSizeï¼Œè®¾ç½®JVMæœ€å¤§å †å†…å­˜ä¸º2048Mã€‚</p>
<p>-Xms512mï¼šç­‰ä»·äº-XX:InitialHeapSizeï¼Œè®¾ç½®JVMåˆå§‹å †å†…å­˜ä¸º512Mã€‚</p>
<h4 id="XXå‚æ•°"><a href="#XXå‚æ•°" class="headerlink" title="-XXå‚æ•°"></a>-XXå‚æ•°</h4><p>-XXå‚æ•°ä¹Ÿæ˜¯éæ ‡å‡†å‚æ•°ï¼Œä¸»è¦ç”¨äºjvmçš„è°ƒä¼˜å’Œdebugæ“ä½œã€‚</p>
<p>-XXå‚æ•°çš„ä½¿ç”¨æœ‰2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯booleanç±»å‹ï¼Œä¸€ç§æ˜¯ébooleanç±»å‹ï¼š</p>
<ul>
<li><p>booleanç±»å‹</p>
<ul>
<li>æ ¼å¼ï¼š-XX:[+-]&lt;name&gt; è¡¨ç¤ºå¯ç”¨æˆ–ç¦ç”¨&lt;name&gt;å±æ€§</li>
<li>å¦‚ï¼š-XX:+DisableExplicitGC è¡¨ç¤ºç¦ç”¨æ‰‹åŠ¨è°ƒç”¨gcæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨System.gc()æ— æ•ˆ</li>
</ul>
</li>
<li><p>ébooleanç±»å‹</p>
<ul>
<li>æ ¼å¼ï¼š-XX:&lt;name&gt;=&lt;value&gt; è¡¨ç¤º&lt;name&gt;å±æ€§çš„å€¼ä¸º&lt;value&gt;</li>
<li>å¦‚ï¼š-XX:NewRatio=4 è¡¨ç¤ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¯”å€¼ä¸º1:4</li>
</ul>
</li>
</ul>
<h4 id="æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„jvmå‚æ•°"><a href="#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„jvmå‚æ•°" class="headerlink" title="æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„jvmå‚æ•°"></a>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„jvmå‚æ•°</h4><pre><code class="hljs less"><span class="hljs-comment">//æŸ¥æ‰¾åº”ç”¨è¿›ç¨‹ç¼–å·</span>
<span class="hljs-selector-tag">jps</span> <span class="hljs-selector-tag">-l</span>
<span class="hljs-comment">//æŸ¥çœ‹è¿è¡Œå‚æ•°</span>
<span class="hljs-selector-tag">jinfo</span> <span class="hljs-selector-tag">-flags</span> <span class="hljs-selector-attr">[è¿›ç¨‹ç¼–å·]</span></code></pre>

<h4 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h4><p>jstatå‘½ä»¤å¯ä»¥æŸ¥çœ‹å †å†…å­˜å„éƒ¨åˆ†çš„ä½¿ç”¨é‡ï¼Œä»¥åŠåŠ è½½ç±»çš„æ•°é‡ã€‚å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p>jstat -[å‘½ä»¤é€‰é¡¹] [vmid] [é—´éš”æ—¶é—´/æ¯«ç§’] [æŸ¥è¯¢æ¬¡æ•°]</p>
<p>å‘½åé€‰é¡¹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>Loadedï¼šåŠ è½½classçš„æ•°é‡</p>
</li>
<li><p>Bytesï¼šæ‰€å ç”¨ç©ºé—´å¤§å°</p>
</li>
<li><p>Unloadedï¼šæœªåŠ è½½æ•°é‡</p>
</li>
<li><p>Bytesï¼šæœªåŠ è½½å ç”¨ç©ºé—´</p>
</li>
<li><p>Timeï¼šæ—¶é—´</p>
</li>
</ul>
<h5 id="classåŠ è½½ç»Ÿè®¡"><a href="#classåŠ è½½ç»Ÿè®¡" class="headerlink" title="classåŠ è½½ç»Ÿè®¡"></a>classåŠ è½½ç»Ÿè®¡</h5><pre><code class="hljs shell">MacBookPro:~ zhaoguocheng$ jstat -class 10730
Loaded  Bytes  Unloaded  Bytes     Time   
 60210 125331.7      953   983.7      47.72</code></pre>

<h5 id="åƒåœ¾å›æ”¶ç»Ÿè®¡"><a href="#åƒåœ¾å›æ”¶ç»Ÿè®¡" class="headerlink" title="åƒåœ¾å›æ”¶ç»Ÿè®¡"></a>åƒåœ¾å›æ”¶ç»Ÿè®¡</h5><pre><code class="hljs shell">MacBookPro:~ zhaoguocheng$ jstat -gc 10730
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
17472.0 17472.0 14212.5  0.0   139776.0 101291.8  508884.0   274618.0  403292.0 385091.1 52184.0 45738.3    196    1.968   0      0.000    1.968
<span class="hljs-meta">#</span><span class="bash">æŒ‡å®šæ¯ç§’é’Ÿæ‰“å°ä¸€æ¬¡ï¼Œæ€»å…±æ‰“å°äº”æ¬¡</span>
MacBookPro:~ zhaoguocheng$ jstat -gc 10730
<span class="hljs-meta">#</span><span class="bash">è¯´æ˜</span>
<span class="hljs-meta">#</span><span class="bash">S0Cï¼šç¬¬ä¸€ä¸ªSurvivoråŒºçš„å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">S1Cï¼šç¬¬äºŒä¸ªSurvivoråŒºçš„å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">S0Uï¼šç¬¬ä¸€ä¸ªSurvivoråŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">S1Uï¼šç¬¬äºŒä¸ªSurvivoråŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">ECï¼šEdenåŒºçš„å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">EUï¼šEdenåŒºçš„ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">OCï¼šOldåŒºå¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">OUï¼šOldä½¿ç”¨å¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">MCï¼šæ–¹æ³•åŒºå¤§å°ï¼ˆKBï¼‰</span>
<span class="hljs-meta">#</span><span class="bash">MUï¼šæ–¹æ³•åŒºä½¿ç”¨å¤§å°ï¼ˆKBï¼‰ CCSCï¼šå‹ç¼©ç±»ç©ºé—´å¤§å°ï¼ˆKBï¼‰ CCSUï¼šå‹ç¼©ç±»ç©ºé—´ä½¿ç”¨å¤§å°ï¼ˆKBï¼‰ YGCï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span>
<span class="hljs-meta">#</span><span class="bash">YGCTï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´</span>
<span class="hljs-meta">#</span><span class="bash">FGCï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•°</span>
<span class="hljs-meta">#</span><span class="bash">FGCTï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶</span></code></pre>

<h3 id="MATå·¥å…·"><a href="#MATå·¥å…·" class="headerlink" title="MATå·¥å…·"></a>MATå·¥å…·</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>MAT(Memory Analyzer Tool)ï¼Œæ˜¯åŸºäºEclipseçš„å†…å­˜åˆ†æå·¥å…·ï¼Œæ˜¯ä¸€ä¸ªå¿«é€Ÿã€åŠŸèƒ½ä¸°å¯Œçš„JAVA heap<br>åˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŸ¥æ‰¾å†…å­˜æ³„æ¼å’Œå‡å°‘å†…å­˜æ¶ˆè€—ã€‚ä½¿ç”¨å†…å­˜åˆ†æå·¥å…·ä»ä¼—å¤šçš„å¯¹è±¡ä¸­è¿›è¡Œåˆ†<br>æï¼Œå¿«é€Ÿçš„è®¡ç®—å‡ºåœ¨å†…å­˜ä¸­å¯¹è±¡çš„å ç”¨å¤§å°ï¼Œçœ‹çœ‹æ˜¯è°é˜»æ­¢äº†åƒåœ¾æ”¶é›†å™¨çš„å›æ”¶å·¥ä½œï¼Œå¹¶å¯ä»¥é€šè¿‡æŠ¥è¡¨<br>ç›´è§‚çš„æŸ¥çœ‹åˆ°å¯èƒ½é€ æˆè¿™ç§ç»“æœçš„å¯¹è±¡ã€‚å®˜ç½‘åœ°å€ï¼š<a href="https://www.eclipse.org/mat/ã€‚" target="_blank" rel="noopener">https://www.eclipse.org/mat/ã€‚</a></p>
<h4 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.eclipse.org/mat/downloads.php" target="_blank" rel="noopener">https://www.eclipse.org/mat/downloads.php</a></p>
<p>å°†ä¸‹è½½å¾—åˆ°çš„MemoryAnalyzer-1.8.0.20180604-win32.win32.x86_64.zipè¿›è¡Œè§£å‹åå³å¯</p>
<p>å¢åŠ JVMè¿è¡Œå‚æ•°<code>-XX:+HeapDumpOnOutOfMemoryError</code>ï¼Œå½“å‘ç”Ÿå†…å­˜æº¢å‡ºæ—¶ï¼Œä¼šdumpå†…å­˜åˆ°åç¼€ä¸º.hprofçš„æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚</p>
<h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic1.png" srcset="/blog/img/loading.gif" class>

<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic2.png" srcset="/blog/img/loading.gif" class>

<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic3.png" srcset="/blog/img/loading.gif" class>

<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic4.png" srcset="/blog/img/loading.gif" class>

<p>æŸ¥çœ‹å¯¹è±¡åŠå…¶ä¾èµ–ï¼š</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic5.png" srcset="/blog/img/loading.gif" class>

<p>æŸ¥çœ‹å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„åˆ†æ</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic6.png" srcset="/blog/img/loading.gif" class>

<h3 id="æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"><a href="#æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"></a>æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€</h3><pre><code class="hljs shell">jstack [pid]</code></pre>

<p>å¦‚æœæœ‰æ­»é”ä¼šæ˜¾ç¤º</p>
<pre><code class="hljs mipsasm">Found one <span class="hljs-keyword">Java-level </span>deadlock: 
============================= 
<span class="hljs-string">"Thread-1"</span>:
  <span class="hljs-keyword">waiting </span>to lock monitor <span class="hljs-number">0x00000000026c3ee8</span> (object <span class="hljs-number">0x0000000780198bb0</span>, a <span class="hljs-keyword">java.lang.Object),</span>
<span class="hljs-keyword"> </span> which is held <span class="hljs-keyword">by </span><span class="hljs-string">"Thread-0"</span>
<span class="hljs-string">"Thread-0"</span>:
  <span class="hljs-keyword">waiting </span>to lock monitor <span class="hljs-number">0x00000000026c40f8</span> (object <span class="hljs-number">0x0000000780198bc0</span>, a <span class="hljs-keyword">java.lang.Object),</span>
<span class="hljs-keyword"> </span> which is held <span class="hljs-keyword">by </span><span class="hljs-string">"Thread-1"</span>

<span class="hljs-keyword">Java </span>stack information for the threads listed above: 
=================================================== 
<span class="hljs-string">"Thread-1"</span>:
    <span class="hljs-built_in">at</span> cn.itcast.<span class="hljs-keyword">jvm.TestDeadLock$Thread2.run(TestDeadLock.java:49)</span>
<span class="hljs-keyword"> </span>   - <span class="hljs-keyword">waiting </span>to lock &lt;<span class="hljs-number">0x0000000780198bb0</span>&gt; (a <span class="hljs-keyword">java.lang.Object)</span>
<span class="hljs-keyword"> </span>   - locked &lt;<span class="hljs-number">0x0000000780198bc0</span>&gt; (a <span class="hljs-keyword">java.lang.Object) </span>
    <span class="hljs-built_in">at</span> <span class="hljs-keyword">java.lang.Thread.run(Thread.java:748) </span>
<span class="hljs-string">"Thread-0"</span>: 
    <span class="hljs-built_in">at</span> cn.itcast.<span class="hljs-keyword">jvm.TestDeadLock$Thread1.run(TestDeadLock.java:29)</span>
<span class="hljs-keyword"> </span>   - <span class="hljs-keyword">waiting </span>to lock &lt;<span class="hljs-number">0x0000000780198bc0</span>&gt; (a <span class="hljs-keyword">java.lang.Object) </span>
    - locked &lt;<span class="hljs-number">0x0000000780198bb0</span>&gt; (a <span class="hljs-keyword">java.lang.Object) </span>
    <span class="hljs-built_in">at</span> <span class="hljs-keyword">java.lang.Thread.run(Thread.java:748) </span>
Found <span class="hljs-number">1</span> deadlock.</code></pre>

<p>å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°ï¼š</p>
<ul>
<li><p>Thread2è·å–äº† &lt;0x0000000780198bc0&gt; çš„é”ï¼Œç­‰å¾…è·å– &lt;0x0000000780198bb0&gt; è¿™ä¸ªé”</p>
</li>
<li><p>Thread1è·å–äº† &lt;0x0000000780198bb0&gt; çš„é”ï¼Œç­‰å¾…è·å– &lt;0x0000000780198bc0&gt; è¿™ä¸ªé”</p>
</li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œå‘ç”Ÿäº†æ­»é”ã€‚</p>
<h3 id="VisualVM"><a href="#VisualVM" class="headerlink" title="VisualVM"></a>VisualVM</h3><p>VisualVMï¼Œèƒ½å¤Ÿç›‘æ§çº¿ç¨‹ï¼Œå†…å­˜æƒ…å†µï¼ŒæŸ¥çœ‹æ–¹æ³•çš„CPUæ—¶é—´å’Œå†…å­˜ä¸­çš„å¯¹ è±¡ï¼Œå·²è¢«GCçš„å¯¹è±¡ï¼Œåå‘æŸ¥</p>
<p>çœ‹åˆ†é…çš„å †æ ˆ(å¦‚100ä¸ªStringå¯¹è±¡åˆ†åˆ«ç”±å“ªå‡ ä¸ªå¯¹è±¡åˆ†é…å‡ºæ¥çš„)ã€‚</p>
<p>VisualVMä½¿ç”¨ç®€å•ï¼Œå‡ ä¹0é…ç½®ï¼ŒåŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒä¸°å¯Œçš„ï¼Œå‡ ä¹å›Šæ‹¬äº†å…¶å®ƒJDKè‡ªå¸¦å‘½ä»¤çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<ul>
<li><p>å†…å­˜ä¿¡æ¯</p>
</li>
<li><p>çº¿ç¨‹ä¿¡æ¯</p>
</li>
<li><p>Dumpå †ï¼ˆæœ¬åœ°è¿›ç¨‹ï¼‰</p>
</li>
<li><p>Dumpçº¿ç¨‹ï¼ˆæœ¬åœ°è¿›ç¨‹ï¼‰</p>
</li>
<li><p>æ‰“å¼€å †Dumpã€‚å †Dumpå¯ä»¥ç”¨jmapæ¥ç”Ÿæˆã€‚</p>
</li>
<li><p>æ‰“å¼€çº¿ç¨‹Dump</p>
</li>
<li><p>ç”Ÿæˆåº”ç”¨å¿«ç…§ï¼ˆåŒ…å«å†…å­˜ä¿¡æ¯ã€çº¿ç¨‹ä¿¡æ¯ç­‰ç­‰ï¼‰</p>
</li>
<li><p>æ€§èƒ½åˆ†æã€‚CPUåˆ†æï¼ˆå„ä¸ªæ–¹æ³•è°ƒç”¨æ—¶é—´ï¼Œæ£€æŸ¥å“ªäº›æ–¹æ³•è€—æ—¶å¤šï¼‰ï¼Œå†…å­˜åˆ†æï¼ˆå„ç±»å¯¹è±¡å ç”¨çš„å†…</p>
</li>
</ul>
<p>å­˜ï¼Œæ£€æŸ¥å“ªäº›ç±»å ç”¨å†…å­˜å¤šï¼‰</p>
<ul>
<li>â€¦â€¦</li>
</ul>
<p>VisualVMåœ¨jdkçš„binç›®å½•ä¸‹ï¼Œæ‰¾åˆ°jvisualvmæ‰“å¼€å³å¯ã€‚</p>
<h4 id="jvmåŸºæœ¬ä¿¡æ¯"><a href="#jvmåŸºæœ¬ä¿¡æ¯" class="headerlink" title="jvmåŸºæœ¬ä¿¡æ¯"></a>jvmåŸºæœ¬ä¿¡æ¯</h4><img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic7.png" srcset="/blog/img/loading.gif" class>

<h4 id="CPUã€å†…å­˜ã€ç±»çº¿ç¨‹è¿è¡Œä¿¡æ¯"><a href="#CPUã€å†…å­˜ã€ç±»çº¿ç¨‹è¿è¡Œä¿¡æ¯" class="headerlink" title="CPUã€å†…å­˜ã€ç±»çº¿ç¨‹è¿è¡Œä¿¡æ¯"></a>CPUã€å†…å­˜ã€ç±»çº¿ç¨‹è¿è¡Œä¿¡æ¯</h4><img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic8.png" srcset="/blog/img/loading.gif" class>

<h4 id="çº¿ç¨‹è¯¦æƒ…"><a href="#çº¿ç¨‹è¯¦æƒ…" class="headerlink" title="çº¿ç¨‹è¯¦æƒ…"></a>çº¿ç¨‹è¯¦æƒ…</h4><img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic9.png" srcset="/blog/img/loading.gif" class>

<p>å³ä¸Šè§’çš„DumpæŒ‰é’®å¯ä»¥åˆ°å¤„çº¿ç¨‹ä¿¡æ¯ï¼Œä¸jstackç›¸åŒ</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic10.png" srcset="/blog/img/loading.gif" class>

<h4 id="æŠ½æ ·å™¨"><a href="#æŠ½æ ·å™¨" class="headerlink" title="æŠ½æ ·å™¨"></a>æŠ½æ ·å™¨</h4><p>æŠ½æ ·å™¨å¯ä»¥å¯¹CPUã€å†…å­˜åœ¨ä¸€æ®µæ—¶é—´å†…è¿›è¡ŒæŠ½æ ·ï¼Œä»¥ä¾›åˆ†æã€‚</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic11.png" srcset="/blog/img/loading.gif" class>

<h4 id="ç›‘æ§è¿œç¨‹jvm"><a href="#ç›‘æ§è¿œç¨‹jvm" class="headerlink" title="ç›‘æ§è¿œç¨‹jvm"></a>ç›‘æ§è¿œç¨‹jvm</h4><p>VisualJVMå¯ä»¥å€ŸåŠ©äºJMXæŠ€æœ¯ç›‘æ§è¿œç¨‹çš„jvmè¿›ç¨‹ã€‚</p>
<p>JMXï¼ˆJava Management Extensionsï¼Œå³Javaç®¡ç†æ‰©å±•ï¼‰æ˜¯ä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºã€è®¾å¤‡ã€ç³»ç»Ÿç­‰æ¤å…¥ç®¡ç†åŠŸèƒ½çš„æ¡†æ¶ã€‚JMXå¯ä»¥è·¨è¶Šä¸€ç³»åˆ—å¼‚æ„æ“ä½œç³»ç»Ÿå¹³å°ã€ç³»ç»Ÿä½“ç³»ç»“æ„å’Œç½‘ç»œä¼ è¾“åè®®ï¼Œçµæ´»çš„å¼€å‘æ— ç¼é›†æˆçš„ç³»ç»Ÿã€ç½‘ç»œå’ŒæœåŠ¡ç®¡ç†åº”ç”¨ã€‚</p>
<h5 id="ç›‘æ§è¿œç¨‹tomcat"><a href="#ç›‘æ§è¿œç¨‹tomcat" class="headerlink" title="ç›‘æ§è¿œç¨‹tomcat"></a>ç›‘æ§è¿œç¨‹tomcat</h5><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">åœ¨tomcatçš„binç›®å½•ä¸‹ï¼Œä¿®æ”¹catalina.shï¼Œæ·»åŠ å¦‚ä¸‹çš„å‚æ•° </span>
JAVA_OPTS="-Dcom.sun.management.jmxremote - 
Dcom.sun.management.jmxremote.port=9999 - 
Dcom.sun.management.jmxremote.authenticate=false - 
Dcom.sun.management.jmxremote.ssl=false" 
<span class="hljs-meta">#</span><span class="bash">è¿™å‡ ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼š </span>
<span class="hljs-meta">#</span><span class="bash">-Dcom.sun.management.jmxremote ï¼šå…è®¸ä½¿ç”¨JMXè¿œç¨‹ç®¡ç† </span>
<span class="hljs-meta">#</span><span class="bash">-Dcom.sun.management.jmxremote.port=9999 ï¼šJMXè¿œç¨‹è¿æ¥ç«¯å£ </span>
<span class="hljs-meta">#</span><span class="bash">-Dcom.sun.management.jmxremote.authenticate=<span class="hljs-literal">false</span> ï¼šä¸è¿›è¡Œèº«ä»½è®¤è¯ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ ä»¥è¿æ¥ </span>
<span class="hljs-meta">#</span><span class="bash">-Dcom.sun.management.jmxremote.ssl=<span class="hljs-literal">false</span> ï¼šä¸ä½¿ç”¨ssl</span></code></pre>

<h5 id="è¿æ¥è¿œç¨‹tomcat"><a href="#è¿æ¥è¿œç¨‹tomcat" class="headerlink" title="è¿æ¥è¿œç¨‹tomcat"></a>è¿æ¥è¿œç¨‹tomcat</h5><p>æ·»åŠ è¿œç¨‹ä¸»æœºï¼š</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic12.png" srcset="/blog/img/loading.gif" class>

<p>åœ¨ä¸€ä¸ªä¸»æœºä¸‹å¯èƒ½ä¼šæœ‰å¾ˆå¤šçš„jvméœ€è¦ç›‘æ§ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è¦åœ¨è¯¥ä¸»æœºä¸Šæ·»åŠ éœ€è¦ç›‘æ§çš„jvmï¼š</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic13.png" srcset="/blog/img/loading.gif" class>

<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic14.png" srcset="/blog/img/loading.gif" class>

<h4 id="æ£€æŸ¥æ­»é”"><a href="#æ£€æŸ¥æ­»é”" class="headerlink" title="æ£€æŸ¥æ­»é”"></a>æ£€æŸ¥æ­»é”</h4><img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic15.png" srcset="/blog/img/loading.gif" class>

<h4 id="æ£€æµ‹å †å†…å­˜"><a href="#æ£€æµ‹å †å†…å­˜" class="headerlink" title="æ£€æµ‹å †å†…å­˜"></a>æ£€æµ‹å †å†…å­˜</h4><p>æ£€æµ‹å †å†…å­˜çš„å…·ä½“ä½¿ç”¨æƒ…å†µï¼Œéœ€è¦å®‰è£…æ’ä»¶Visual GCè¿›è¡Œæ£€æµ‹ï¼š</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic16.png" srcset="/blog/img/loading.gif" class>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå¹´è½»ä»£ã€è€å¹´ä»£ä¸­çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</p>
<img src="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%80%A7%E8%83%BD%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/pic17.png" srcset="/blog/img/loading.gif" class>




            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/blog/categories/JVM%E8%99%9A%E6%8B%9F%E6%9C%BA/">JVMè™šæ‹Ÿæœº</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/blog/tags/JVM/">JVM</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/blog/2020/07/13/JVM-%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JVMçš„åƒåœ¾æ”¶é›†</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/blog/2020/07/09/JVM-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">
                        <span class="hidden-mobile">JVMè™šæ‹Ÿæœºå†…å­˜ç®¡ç†</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/blog/js/debouncer.js" ></script>
<script  src="/blog/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/blog/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/blog/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "è™šæ‹Ÿæœºæ€§èƒ½ç›¸å…³å·¥å…·&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/blog/js/local-search.js" ></script>
  <script>
    var path = "/blog/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script type="text/javascript">
      //å®šä¹‰è·å–è¯è¯­ä¸‹æ ‡
      var a_idx = 0;
      jQuery(document).ready(function ($) {
        //ç‚¹å‡»bodyæ—¶è§¦å‘äº‹ä»¶
        $("body").click(function (e) {
          //éœ€è¦æ˜¾ç¤ºçš„è¯è¯­
          var a = new Array("å¯Œå¼º", "æ°‘ä¸»", "æ–‡æ˜", "å’Œè°", "è‡ªç”±", "å¹³ç­‰", "å…¬æ­£", "æ³•æ²»", "çˆ±å›½", "æ•¬ä¸š", "è¯šä¿¡", "å‹å–„");
          //è®¾ç½®è¯è¯­ç»™spanæ ‡ç­¾
          var $i = $("<span/>").text(a[a_idx]);
          //ä¸‹æ ‡ç­‰äºåŸæ¥ä¸‹æ ‡+1  ä½™ è¯è¯­æ€»æ•°
          a_idx = (a_idx + 1) % a.length;
          //è·å–é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆ†åˆ«ç›¸å¯¹äºæ–‡æ¡£çš„å·¦å’Œå³è¾¹ç¼˜ã€‚
          //è·å–xå’Œyçš„æŒ‡é’ˆåæ ‡
          var x = e.pageX, y = e.pageY;
          //åœ¨é¼ æ ‡çš„æŒ‡é’ˆçš„ä½ç½®ç»™$iå®šä¹‰çš„spanæ ‡ç­¾æ·»åŠ cssæ ·å¼
          $i.css({
            "z-index": 999,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": rand_color()
          });
          // éšæœºé¢œè‰²
          function rand_color() {
            return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
          }
          //åœ¨bodyæ·»åŠ è¿™ä¸ªæ ‡ç­¾
          $("body").append($i);
          //animate() æ–¹æ³•æ‰§è¡Œ CSS å±æ€§é›†çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚
          //è¯¥æ–¹æ³•é€šè¿‡CSSæ ·å¼å°†å…ƒç´ ä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚CSSå±æ€§å€¼æ˜¯é€æ¸æ”¹å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœã€‚
          //è¯¦æƒ…è¯·çœ‹http://www.w3school.com.cn/jquery/effect_animate.asp
          $i.animate({
            //å°†åŸæ¥çš„ä½ç½®å‘ä¸Šç§»åŠ¨180
            "top": y - 180,
            "opacity": 0
            //1500åŠ¨ç”»çš„é€Ÿåº¦
          }, 1500, function () {
            //æ—¶é—´åˆ°äº†è‡ªåŠ¨åˆ é™¤
            $i.remove();
          });
        });
      })
      ;
    </script>
  














</body>
</html>
